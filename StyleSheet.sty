%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                   %
%   The purpose of this document is to provide the  %
%   user with a simple and professional report      %
%   format as well as all of the code required to   %
%   produce tidy, legible documentation.            %
%                                                   %
%   Authors: Max E. Westerman, Daniel J. Carey      %
%   Sponsored by maxwesterman.com                   %
%                                                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%% Variables %%%%%%%%%%%%%%%%%%%%
\newcommand{\TITLENAME}{Title}
\newcommand{\NAMES}{Contributors' Names}
\newcommand{\CLASS}{Class Name}
\newcommand{\SCHOOLNAME}{University Name}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Page layout and hyperlinks
\usepackage[margin=1in]{geometry}   % Set page margins
\usepackage{fancyhdr, lastpage}     % Custom headers and footers
\usepackage{microtype}
\usepackage{standalone}
\usepackage{setspace}
\usepackage{xcolor}                 % Allows setting custom colors
\usepackage{hyperref}               % Hyperlinks
\hypersetup{
    colorlinks=true,
    linkcolor={rgb,255:red,0;green,0;blue,139}, % Dark Blue
    filecolor=red,
    urlcolor=blue,
    pdftitle={\TITLENAME}
    pdfauthor ={\NAMES}
    pdfpagemode=FullScreen,
}


% Math packages
\usepackage{amsmath,amsthm,amssymb}

% Graphics and tables
\usepackage{graphicx}   % Include graphics
\usepackage{subcaption} % Subcaptions for figures
\usepackage{booktabs}   % Improved table formatting
\usepackage{float}      % Better control over float positions

% Code listing
\usepackage{listings} % Code listings
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\definecolor{vscodelightgray}{rgb}{0.98, 0.98, 0.98} %Background
\definecolor{vscodegray}{rgb}{0.52941, 0.52941, 0.52941}
\definecolor{vscodeblue}{rgb}{0.0862, 0.098, 0.976}
\definecolor{vscodebluegreen}{rgb}{0.0588, 0.5215, 0.352} % Numbers
\definecolor{vscodered}{rgb}{0.63, 0.082, 0.117} %Strings
\definecolor{vscodecyan}{rgb}{0.18, 0.57, 0.68} % keyword/line#
\definecolor{vscodegreen}{rgb}{0.00784,0.49803,0.098} %Comments
\definecolor{vscodepurple}{rgb}{0.7254,0.3294,0.749}


\lstdefinestyle{shared}{
    basicstyle=\footnotesize\ttfamily,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single
}

\lstdefinelanguage{cpp}{
    language=C++,
    style=shared,
    keywordstyle=\color{vscodeblue},
    backgroundcolor=\color{vscodelightgray},   
    commentstyle=\color{vscodegreen},
    numberstyle=\color{vscodecyan}\bfseries\ttfamily,,
    stringstyle=\color{vscodered},
    basicstyle=\scriptsize\ttfamily,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,             
    classoffset=0,  % Starting default class
    classoffset=1,  % Starting a new class for additional keywords
    morekeywords={
        MotorCalibration,
        vector,
        ColorSensor,
        Motor,
        UltraSonic,
        MWServo,
        Button,
        PIDController,
        IRSensorArray,
        percent,
        MoveType,
        Color,
        ObstacleFlag,
        ObstacleAvoidance,
        PickupPlace,
        cm,
        Cardinal,
        CalibrationPoint,
        deque,
        MotorCalibration,
        degree,
    },
    keywordstyle=\color{vscodecyan},
    classoffset=2,
    morekeywords={
        VERTICAL_BOT_LENGTH,
        HORIZONTAL_BOT_LENGTH,
        TOP_MOTOR_TO_IR_ARRAY_LENGTH,
        BOTTOM_MOTOR_TO_IR_ARRAY_LENGTH,
        INITIALIZATION_H,
        MW_SERVO_H,
        BUTTON_H,
        COLOR_SENSOR_H,
        IR_SENSOR_ARRAY_H,
        MOTOR_H,
        ULTRASONIC_H,
        BOX_CONTROL_H,
        LINEFOLLOWING_H,
        MOTION_H,
        OBSTACLE_AVOIDANCE_H,
        PICKUP_PLACE_H,
        INPUT,
        OUTPUT,
        LOW,
        HIGH,
        INPUT_PULLDOWN,
    },
    keywordstyle=\color{vscodepurple},
    classoffset=0,  % Reverting to default class
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    literate={0}{{{\color{vscodebluegreen}0}}}1
            {1}{{{\color{vscodebluegreen}1}}}1
            {2}{{{\color{vscodebluegreen}2}}}1
            {3}{{{\color{vscodebluegreen}3}}}1
            {4}{{{\color{vscodebluegreen}4}}}1
            {5}{{{\color{vscodebluegreen}5}}}1
            {6}{{{\color{vscodebluegreen}6}}}1
            {7}{{{\color{vscodebluegreen}7}}}1
            {8}{{{\color{vscodebluegreen}8}}}1
            {9}{{{\color{vscodebluegreen}9}}}1
            % Adding entries for numbers followed by a period
            {0.}{{{\color{vscodebluegreen}0.}}}2
            {1.}{{{\color{vscodebluegreen}1.}}}2
            {2.}{{{\color{vscodebluegreen}2.}}}2
            {3.}{{{\color{vscodebluegreen}3.}}}2
            {4.}{{{\color{vscodebluegreen}4.}}}2
            {5.}{{{\color{vscodebluegreen}5.}}}2
            {6.}{{{\color{vscodebluegreen}6.}}}2
            {7.}{{{\color{vscodebluegreen}7.}}}2
            {8.}{{{\color{vscodebluegreen}8.}}}2
            {9.}{{{\color{vscodebluegreen}9.}}}2,
}
\lstdefinelanguage{python}{
  style=shared,
  basicstyle=\small\ttfamily,
  keywordstyle=\color{blue},
  stringstyle=\color{red},
  commentstyle=\color{gray},
  numbers=left,
  numberstyle=\tiny,
  numbersep=5pt,
  frame=single,
  breaklines=true,
  breakatwhitespace=true,
  showstringspaces=false,
  captionpos=b,
}

\usepackage{siunitx} % SI units and number formatting
\sisetup{
  group-separator={,},
  group-four-digits=true,
  unit-font-command=\small\text
}

% Miscellaneous
\usepackage{url}             % URL handling
\usepackage{bm}              % Bold math symbols

% Section numbering depth
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\usepackage{Graphs/GraphDefinitions}
\usepackage{acronym}

\setlength{\headheight}{30pt}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\CLASS \\ \today}
\fancyhead[R]{\TITLENAME \\ \NAMES}
\fancyfoot[C]{Page \thepage\ of \pageref{LastPage}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\usepackage[Bjornstrup]{fncychap}

% Redefine the plain page style used for chapter beginnings
\fancypagestyle{plain}{
  \fancyhf{} % clear all header and footer fields
  \fancyfoot[C]{Page \thepage\ of \pageref{LastPage}}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

\usepackage[acronym, toc]{glossaries-extra}
\setabbreviationstyle[acronym]{long-short}
\newacronym{TEMPS}{TEMPS}{System Test and Verifications}
\newacronym{IR}{IR}{Infrared}
\newacronym{ABHS}{ABHS}{Autonomous Box Handling System}
\usepackage{cleveref}

\makeglossaries

% Define a new glossary style
\newglossarystyle{dottedlocations}{%
    % base it on the 'list' style:
    \setglossarystyle{list}%
    % Change the way the label is displayed:
    \renewcommand*{\glossentry}[2]{%
    \item[\glsentryitem{##1}\glstarget{##1}{\glossentryname{##1}}]
    \glossentrydesc{##1}\dotfill ##2}%
}

% Use the new style
\setglossarystyle{dottedlocations}